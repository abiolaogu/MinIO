# MinIO Enterprise - Backup Configuration
# This file contains default settings for backup and restore operations

# =======================
# Backup Settings
# =======================

# Backup directory (where backups are stored)
BACKUP_DIR=/var/backups/minio-enterprise

# Backup type: full or incremental
# - full: Complete backup of all data
# - incremental: Only files modified in last 24 hours
BACKUP_TYPE=full

# Retention policy (days)
# Backups older than this will be automatically deleted
RETENTION_DAYS=30

# Compression (true/false)
# Reduces backup size but increases CPU usage
COMPRESSION=true

# Encryption (true/false)
# Encrypts backups using AES-256-CBC
# IMPORTANT: Set ENCRYPTION_KEY environment variable if enabled
ENCRYPTION=false

# Encryption key (if ENCRYPTION=true)
# Store this securely! Loss of key means data loss
# ENCRYPTION_KEY=your-secure-encryption-key-here

# =======================
# Database Settings
# =======================

# PostgreSQL Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=minio
POSTGRES_USER=postgres
# POSTGRES_PASSWORD should be set via environment variable for security
# POSTGRES_PASSWORD=

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD should be set via environment variable for security
# REDIS_PASSWORD=

# =======================
# Data Paths
# =======================

# MinIO data directory
MINIO_DATA_DIR=/data/minio

# Configuration directory
CONFIG_DIR=/etc/minio

# =======================
# Restore Settings
# =======================

# Components to restore (comma-separated or "all")
# Options: all, postgres, redis, minio, config
RESTORE_COMPONENTS=all

# Create rollback backup before restore (true/false)
# Highly recommended for production systems
CREATE_ROLLBACK=true

# Dry run mode (true/false)
# Test restore without making actual changes
DRY_RUN=false

# =======================
# Scheduling Settings
# =======================

# Cron schedule for automated backups
# Default: Daily at 2 AM
# Format: minute hour day month weekday
# Examples:
#   Daily at 2 AM:     0 2 * * *
#   Every 6 hours:     0 */6 * * *
#   Weekly on Sunday:  0 2 * * 0
BACKUP_SCHEDULE="0 2 * * *"

# =======================
# Notification Settings
# =======================

# Email notifications (requires mail/sendmail configured)
NOTIFY_EMAIL=false
NOTIFY_EMAIL_TO=admin@example.com
NOTIFY_EMAIL_FROM=backup@minio-enterprise.local

# Slack notifications (requires webhook URL)
NOTIFY_SLACK=false
SLACK_WEBHOOK_URL=

# =======================
# Advanced Settings
# =======================

# Backup verification after completion
VERIFY_BACKUP=true

# Number of parallel backup operations
PARALLEL_JOBS=4

# Temp directory for backup operations
TEMP_DIR=/tmp/minio-backup

# Log file location
LOG_FILE=/var/log/minio-backup.log

# Maximum backup size (in GB) before warning
MAX_BACKUP_SIZE_GB=100

# =======================
# Remote Backup Storage (Optional)
# =======================

# Copy backups to remote storage after creation
REMOTE_BACKUP=false

# Remote backup type: s3, rsync, nfs
REMOTE_BACKUP_TYPE=s3

# S3 Configuration (if REMOTE_BACKUP_TYPE=s3)
S3_BUCKET=minio-backups
S3_REGION=us-east-1
S3_ENDPOINT=https://s3.amazonaws.com
# S3_ACCESS_KEY and S3_SECRET_KEY should be set via environment variables

# Rsync Configuration (if REMOTE_BACKUP_TYPE=rsync)
RSYNC_DEST=backup-server:/backups/minio-enterprise
RSYNC_OPTIONS=-avz --delete

# NFS Configuration (if REMOTE_BACKUP_TYPE=nfs)
NFS_MOUNT=/mnt/backup-nfs
NFS_PATH=/backups/minio-enterprise
