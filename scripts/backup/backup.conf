# MinIO Enterprise - Backup Configuration
#
# This file contains default configuration for the backup script.
# You can override these values by:
#   1. Editing this file
#   2. Setting environment variables
#   3. Creating a custom config file and setting BACKUP_CONFIG_FILE

###############################################################################
# Backup Settings
###############################################################################

# Backup type: full or incremental
BACKUP_TYPE="full"

# Directory where backups will be stored
BACKUP_DIR="/var/backups/minio"

# Retention period in days (backups older than this will be deleted)
BACKUP_RETENTION_DAYS=30

###############################################################################
# Compression & Encryption
###############################################################################

# Enable compression (true/false)
ENABLE_COMPRESSION=true

# Enable encryption (true/false)
ENABLE_ENCRYPTION=true

# Path to encryption key file
# IMPORTANT: Keep this file secure and backed up separately!
ENCRYPTION_KEY_FILE="$SCRIPT_DIR/.backup.key"

###############################################################################
# Deployment Configuration
###############################################################################

# Deployment type: docker or kubernetes
DEPLOYMENT_TYPE="docker"

# Docker Compose file path (for Docker deployments)
DOCKER_COMPOSE_FILE="$PROJECT_ROOT/deployments/docker/docker-compose.production.yml"

# Kubernetes namespace (for Kubernetes deployments)
KUBE_NAMESPACE="minio-enterprise"

###############################################################################
# Component Selection
###############################################################################

# Enable/disable backup of specific components
BACKUP_POSTGRES=true
BACKUP_REDIS=true
BACKUP_MINIO=true
BACKUP_CONFIGS=true

###############################################################################
# S3 Remote Backup (Optional)
###############################################################################

# Enable S3 upload (true/false)
S3_BACKUP_ENABLED=false

# S3 bucket name (required if S3_BACKUP_ENABLED=true)
# S3_BUCKET="my-minio-backups"

# S3 endpoint URL (optional, for S3-compatible storage)
# S3_ENDPOINT="https://s3.amazonaws.com"

# AWS credentials should be configured via:
#   - AWS CLI configuration (~/.aws/credentials)
#   - Environment variables (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
#   - IAM roles (for EC2/ECS)

###############################################################################
# Notifications (Optional)
###############################################################################

# Slack webhook URL for notifications
# SLACK_WEBHOOK="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"

# Email recipient for notifications (requires mail command)
# EMAIL_RECIPIENT="admin@example.com"

###############################################################################
# Advanced Options
###############################################################################

# PostgreSQL connection settings (usually auto-detected from docker-compose)
# POSTGRES_HOST="localhost"
# POSTGRES_PORT="5432"
# POSTGRES_USER="postgres"
# POSTGRES_DB="all"  # Use "all" for pg_dumpall

# Redis connection settings
# REDIS_HOST="localhost"
# REDIS_PORT="6379"

# MinIO settings
# MINIO_DATA_PATH="/data"

###############################################################################
# Scheduling
###############################################################################

# This configuration file can be used with cron for automated backups.
# Example crontab entries:
#
# Daily full backup at 2 AM:
#   0 2 * * * /path/to/minio/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
#
# Hourly incremental backup:
#   0 * * * * BACKUP_TYPE=incremental /path/to/minio/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
#
# Weekly full backup on Sunday at 3 AM with S3 upload:
#   0 3 * * 0 S3_BACKUP_ENABLED=true /path/to/minio/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
