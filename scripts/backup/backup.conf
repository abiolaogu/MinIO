# MinIO Enterprise - Backup Configuration
# Version: 1.0.0
# Date: 2026-02-07
#
# This configuration file can be placed at:
#   1. /etc/minio/backup.conf (system-wide)
#   2. scripts/backup/backup.conf (repository location)
#
# All values can also be overridden by environment variables

#==============================================================================
# GENERAL BACKUP SETTINGS
#==============================================================================

# Backup type: full or incremental
BACKUP_TYPE="full"

# Directory where backups will be stored
BACKUP_DIR="/var/backups/minio"

# Retention period in days (backups older than this will be deleted)
RETENTION_DAYS=30

# Enable compression (true/false)
COMPRESS=true

# Enable encryption (true/false)
ENCRYPT=false

# Encryption key (required if ENCRYPT=true)
# IMPORTANT: Store this securely, do not commit to version control
ENCRYPTION_KEY=""

#==============================================================================
# S3 BACKUP SETTINGS
#==============================================================================

# Enable S3 backup upload (true/false)
S3_BACKUP=false

# S3 endpoint (leave empty for AWS S3, set for MinIO or other S3-compatible)
S3_ENDPOINT=""

# S3 bucket name
S3_BUCKET="minio-backups"

# S3 credentials
# IMPORTANT: Store these securely, do not commit to version control
S3_ACCESS_KEY=""
S3_SECRET_KEY=""

#==============================================================================
# POSTGRESQL SETTINGS
#==============================================================================

# PostgreSQL connection details
POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"
POSTGRES_DB="minio"
POSTGRES_USER="postgres"

# PostgreSQL password
# IMPORTANT: Store this securely, do not commit to version control
POSTGRES_PASSWORD=""

#==============================================================================
# REDIS SETTINGS
#==============================================================================

# Redis connection details
REDIS_HOST="localhost"
REDIS_PORT="6379"

# Redis password (leave empty if no password)
# IMPORTANT: Store this securely, do not commit to version control
REDIS_PASSWORD=""

#==============================================================================
# MINIO SETTINGS
#==============================================================================

# MinIO endpoint
MINIO_ENDPOINT="http://localhost:9000"

# MinIO credentials
# IMPORTANT: Store these securely, do not commit to version control
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"

#==============================================================================
# EXAMPLE CONFIGURATIONS
#==============================================================================

# Example 1: Basic daily backup with compression
# BACKUP_TYPE="full"
# BACKUP_DIR="/var/backups/minio"
# RETENTION_DAYS=7
# COMPRESS=true
# ENCRYPT=false

# Example 2: Encrypted backup with S3 upload
# BACKUP_TYPE="full"
# COMPRESS=true
# ENCRYPT=true
# ENCRYPTION_KEY="your-strong-encryption-key-here"
# S3_BACKUP=true
# S3_ENDPOINT="https://s3.amazonaws.com"
# S3_BUCKET="my-minio-backups"
# S3_ACCESS_KEY="AKIAIOSFODNN7EXAMPLE"
# S3_SECRET_KEY="wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

# Example 3: Docker environment backup
# POSTGRES_HOST="postgres"
# POSTGRES_PORT="5432"
# POSTGRES_DB="minio"
# POSTGRES_USER="postgres"
# POSTGRES_PASSWORD="postgres_password"
# REDIS_HOST="redis"
# REDIS_PORT="6379"
# MINIO_ENDPOINT="http://minio1:9000"
# MINIO_ACCESS_KEY="minioadmin"
# MINIO_SECRET_KEY="minioadmin"

#==============================================================================
# SCHEDULING EXAMPLES
#==============================================================================

# To schedule backups with cron:
#
# Daily backup at 2:00 AM:
# 0 2 * * * /path/to/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
#
# Twice daily (2 AM and 2 PM):
# 0 2,14 * * * /path/to/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
#
# Weekly on Sunday at 3:00 AM:
# 0 3 * * 0 /path/to/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1
#
# Monthly on the 1st at 4:00 AM:
# 0 4 1 * * /path/to/scripts/backup/backup.sh >> /var/log/minio-backup.log 2>&1

#==============================================================================
# SYSTEMD TIMER EXAMPLE
#==============================================================================

# Create /etc/systemd/system/minio-backup.service:
# [Unit]
# Description=MinIO Enterprise Backup
# After=network.target
#
# [Service]
# Type=oneshot
# ExecStart=/path/to/scripts/backup/backup.sh
# User=root
# EnvironmentFile=/etc/minio/backup.conf

# Create /etc/systemd/system/minio-backup.timer:
# [Unit]
# Description=MinIO Enterprise Backup Timer
# Requires=minio-backup.service
#
# [Timer]
# OnCalendar=daily
# OnCalendar=02:00
# Persistent=true
#
# [Install]
# WantedBy=timers.target

# Enable and start timer:
# systemctl daemon-reload
# systemctl enable minio-backup.timer
# systemctl start minio-backup.timer
# systemctl list-timers --all
