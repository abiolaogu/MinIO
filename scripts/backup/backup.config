# MinIO Enterprise Backup Configuration
# =====================================
#
# This file contains configuration options for the backup script.
# Copy this file and customize it for your environment.
#
# Version: 1.0.0
# Date: 2026-02-07
#

# ============================================================================
# Backup Settings
# ============================================================================

# Backup type: "full" or "incremental"
# Full backup: Complete backup of all data
# Incremental backup: Only backs up data changed since last backup
BACKUP_TYPE="full"

# Backup directory (local storage)
# This is where backups will be stored on the local filesystem
BACKUP_DIR="/var/backups/minio"

# Retention policy (days)
# Backups older than this will be automatically deleted
RETENTION_DAYS=30

# Enable compression (true/false)
# Reduces backup size but increases CPU usage
ENABLE_COMPRESSION=true

# Enable encryption (true/false)
# Encrypts backup files using AES-256-CBC
ENABLE_ENCRYPTION=false

# Encryption key file location
# This file will be created automatically if it doesn't exist
# IMPORTANT: Keep this file secure and backed up separately!
ENCRYPTION_KEY_FILE="/etc/minio/backup.key"

# Log file location
LOG_FILE="/var/log/minio-backup.log"

# ============================================================================
# PostgreSQL Configuration
# ============================================================================

POSTGRES_HOST="localhost"
POSTGRES_PORT="5432"
POSTGRES_USER="minio"
POSTGRES_DB="minio"
# POSTGRES_PASSWORD should be set via environment variable for security
# export POSTGRES_PASSWORD="your_password"

# ============================================================================
# Redis Configuration
# ============================================================================

REDIS_HOST="localhost"
REDIS_PORT="6379"
# REDIS_PASSWORD should be set via environment variable if Redis auth is enabled
# export REDIS_PASSWORD="your_password"

# ============================================================================
# MinIO Data Configuration
# ============================================================================

# MinIO data directory
# This is where MinIO stores object data
MINIO_DATA_DIR="/data/minio"

# Configuration directory
# This includes all configuration files to be backed up
CONFIG_DIR="/etc/minio"

# ============================================================================
# S3 Remote Backup (Optional)
# ============================================================================

# Enable S3 sync after backup (true/false)
# If enabled, backups will be copied to an S3-compatible storage
S3_ENABLED=false

# S3 bucket name (required if S3_ENABLED=true)
S3_BUCKET=""

# S3 endpoint (optional, leave empty for AWS S3)
# For MinIO or other S3-compatible storage, specify the endpoint
# Example: "https://s3.example.com"
S3_ENDPOINT=""

# AWS credentials should be set via environment variables or AWS CLI config
# export AWS_ACCESS_KEY_ID="your_access_key"
# export AWS_SECRET_ACCESS_KEY="your_secret_key"
# export AWS_DEFAULT_REGION="us-east-1"

# ============================================================================
# Schedule Configuration (for cron)
# ============================================================================
#
# Example cron schedules:
#
# Daily full backup at 2 AM:
# 0 2 * * * /path/to/backup.sh
#
# Hourly incremental backup:
# 0 * * * * BACKUP_TYPE=incremental /path/to/backup.sh
#
# Weekly full backup on Sunday at 3 AM:
# 0 3 * * 0 /path/to/backup.sh
#
# Daily full backup with S3 sync:
# 0 2 * * * S3_ENABLED=true /path/to/backup.sh
#
# ============================================================================

# ============================================================================
# Docker Compose Environment
# ============================================================================
#
# If using Docker Compose, adjust paths to match container volumes:
#
# MINIO_DATA_DIR="/var/lib/docker/volumes/minio_data/_data"
# POSTGRES_HOST="postgres"
# REDIS_HOST="redis"
#
# Run backup script from host or dedicated backup container
#
# ============================================================================

# ============================================================================
# Kubernetes Environment
# ============================================================================
#
# For Kubernetes deployments, use kubectl exec to run backups:
#
# kubectl exec -n minio-enterprise deployment/minio-1 -- /scripts/backup/backup.sh
#
# Or create a CronJob to run automated backups:
# See: deployments/kubernetes/backup-cronjob.yaml
#
# ============================================================================
