# MinIO Enterprise - Restore Configuration
#
# This file contains default configuration for the restore script.
# You can override these values by:
#   1. Editing this file
#   2. Setting environment variables
#   3. Creating a custom config file and setting RESTORE_CONFIG_FILE

###############################################################################
# Restore Settings
###############################################################################

# Directory where backups are stored
BACKUP_DIR="/var/backups/minio"

# Temporary directory for restore operations
RESTORE_DIR="/tmp/minio_restore"

# Create snapshot before restore (recommended)
CREATE_SNAPSHOT=true

# Force restore without confirmation prompts
FORCE_RESTORE=false

# Perform dry run (preview what would be restored)
DRY_RUN=false

###############################################################################
# Encryption
###############################################################################

# Path to encryption key file (must match backup encryption key)
ENCRYPTION_KEY_FILE="$SCRIPT_DIR/../backup/.backup.key"

###############################################################################
# Deployment Configuration
###############################################################################

# Deployment type: docker or kubernetes
DEPLOYMENT_TYPE="docker"

# Docker Compose file path (for Docker deployments)
DOCKER_COMPOSE_FILE="$PROJECT_ROOT/deployments/docker/docker-compose.production.yml"

# Kubernetes namespace (for Kubernetes deployments)
KUBE_NAMESPACE="minio-enterprise"

###############################################################################
# Component Selection
###############################################################################

# Enable/disable restore of specific components
RESTORE_POSTGRES=true
RESTORE_REDIS=true
RESTORE_MINIO=true
RESTORE_CONFIGS=true

###############################################################################
# Notifications (Optional)
###############################################################################

# Slack webhook URL for notifications
# SLACK_WEBHOOK="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"

# Email recipient for notifications (requires mail command)
# EMAIL_RECIPIENT="admin@example.com"

###############################################################################
# Safety & Verification
###############################################################################

# Perform verification checks after restore
VERIFY_RESTORE=true

# Stop on first error (recommended)
set -e

# Maximum time to wait for services to start (seconds)
SERVICE_STARTUP_TIMEOUT=60

###############################################################################
# Rollback Configuration
###############################################################################

# Automatically rollback on failure (if snapshot exists)
AUTO_ROLLBACK=false

# Keep snapshot after successful restore
KEEP_SNAPSHOT=true

# Snapshot retention days
SNAPSHOT_RETENTION_DAYS=7

###############################################################################
# Recovery Options
###############################################################################

# Point-in-time recovery (if available)
# PITR_ENABLED=false
# PITR_TIMESTAMP="2024-01-18T12:00:00Z"

# Selective restore (specify tables, keys, objects)
# POSTGRES_TABLES=""
# REDIS_KEYS=""
# MINIO_PREFIXES=""

###############################################################################
# Usage Examples
###############################################################################

# Restore latest backup (interactive):
#   ./restore.sh
#
# Restore specific backup:
#   ./restore.sh minio_backup_20240118_120000
#
# Dry run to preview restore:
#   DRY_RUN=true ./restore.sh minio_backup_20240118_120000
#
# Force restore without prompts:
#   FORCE_RESTORE=true ./restore.sh minio_backup_20240118_120000
#
# Restore only PostgreSQL:
#   ./restore.sh --postgres-only minio_backup_20240118_120000
#
# Restore without creating snapshot (not recommended):
#   CREATE_SNAPSHOT=false ./restore.sh minio_backup_20240118_120000
